<div id="client-payment-view" class="hidden">
  <div class="mb-6 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <button
        onclick="toggleClientStageView('stages')"
        class="p-2 rounded-full hover:bg-gray-200 text-gray-600"
      >
        <i class="ph ph-arrow-left text-xl"></i>
      </button>
      <h1 class="text-2xl font-bold text-gray-800">Payment Details</h1>
    </div>
  </div>

  <form
    id="paymentDetailsForm"
    onsubmit="submitPaymentForm(event)"
    class="space-y-6"
  >
    <input type="hidden" name="id" id="pay-id" />

    <div
      class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-6"
    >
      <!-- Payment Type -->
      <div>
        <label class="block text-xs text-gray-400 uppercase mb-2 font-bold"
          >Payment Type</label
        >
        <select
          name="paymentType"
          id="pay-paymentType"
          required
          class="input-field text-sm py-2"
        >
          <option value="">Select Payment Type...</option>
          <option value="Private pay">Private pay</option>
          <option value="Lead Insurance">Lead Insurance</option>
          <option value="Medicaid">Medicaid</option>
          <option value="VA">VA</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <!-- Payment Options -->
      <div>
        <label class="block text-xs text-gray-400 uppercase mb-3 font-bold"
          >Payment Options</label
        >
        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="cash"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Cash
          </label>
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="check"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Check
          </label>
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="zelle"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Zelle
          </label>
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="direct deposit"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Direct Deposit
          </label>
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="apple pay"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Apple Pay
          </label>
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="bank deposit"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Bank Deposit
          </label>
          <label
            class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer hover:bg-gray-50 p-2 rounded-lg border border-gray-100"
          >
            <input
              type="radio"
              name="payOption"
              value="credit/debit card"
              class="text-blue-600 focus:ring-blue-500"
              onchange="togglePaymentDetailFields()"
            />
            Credit/Debit Card
          </label>
        </div>
      </div>

      <!-- Bank Details Section -->
      <div
        id="pay-bankDetails"
        class="hidden space-y-4 border-t border-gray-100 pt-6"
      >
        <h3 class="text-sm font-bold text-gray-800 flex items-center gap-2">
          <i class="ph ph-bank text-blue-600"></i> Bank Information
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="md:col-span-2">
            <label class="block text-[10px] text-gray-400 uppercase"
              >Bank Name</label
            >
            <input
              type="text"
              name="payBankName"
              id="pay-bankName"
              class="input-field text-sm py-2"
            />
          </div>
          <div class="md:col-span-2">
            <label class="block text-[10px] text-gray-400 uppercase"
              >Full Account Holder Name</label
            >
            <input
              type="text"
              name="payHolderName"
              id="pay-holderName"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Account Type</label
            >
            <select
              name="payAccountType"
              id="pay-accountType"
              class="input-field text-sm py-2"
            >
              <option value="Checking">Checking</option>
              <option value="Savings">Savings</option>
            </select>
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Holder Type</label
            >
            <select
              name="payHolderType"
              id="pay-holderType"
              class="input-field text-sm py-2"              
            >
              <option value="Personal">Personal</option>
              <option value="Business">Business</option>
            </select>
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Business Name</label
            >
            <input
              type="text"
              name="payBusinessName"
              id="pay-businessName"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Account Number</label
            >
            <input
              type="password"
              name="payAccountNum"
              id="pay-accountNum"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Confirm Account Number</label
            >
            <input
              type="text"
              id="pay-accountNumConfirm"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Routing Number</label
            >
            <input
              type="password"
              name="payRoutingNum"
              id="pay-routingNum"
              class="input-field text-sm py-2"
              maxlength="9"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Confirm Routing Number</label
            >
            <input
              type="text"
              id="pay-routingNumConfirm"
              class="input-field text-sm py-2"
              maxlength="9"
            />
          </div>
        </div>
      </div>

      <!-- Digital Details Section (Zelle/Apple Pay) -->
      <div
        id="pay-digitalDetails"
        class="hidden space-y-4 border-t border-gray-100 pt-6"
      >
        <h3 class="text-sm font-bold text-gray-800 flex items-center gap-2">
          <i class="ph ph-device-mobile text-blue-600"></i> Digital Details
          (Zelle/Apple Pay)
        </h3>
        <div class="space-y-4">
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Full Name</label
            >
            <input
              type="text"
              name="payDigitalFullName"
              id="pay-digitalFullName"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase mb-1"
              >Link Account With</label
            >
            <div class="flex gap-4">
              <label
                class="flex items-center gap-2 text-xs text-gray-600 cursor-pointer"
              >
                <input
                  type="radio"
                  name="payDigitalType"
                  value="phone"
                  checked
                  onchange="togglePayDigitalInputs()"
                />
                Phone Number
              </label>
              <label
                class="flex items-center gap-2 text-xs text-gray-600 cursor-pointer"
              >
                <input
                  type="radio"
                  name="payDigitalType"
                  value="email"
                  onchange="togglePayDigitalInputs()"
                />
                Email Address
              </label>
            </div>
          </div>
          <div id="pay-digitalValueContainer">
            <label
              id="pay-digitalValueLabel"
              class="block text-[10px] text-gray-400 uppercase"
              >Phone Number</label
            >
            <input
              type="text"
              name="payDigitalValue"
              id="pay-digitalValue"
              oninput="const type = document.querySelector('input[name=\'payDigitalType\']:checked')?.value || 'phone'; if(type === 'phone') formatPhone(this)"
              class="input-field text-sm py-2"
            />
          </div>
        </div>
      </div>

      <!-- Insurance Information Section -->
      <div
        id="pay-insuranceInfo"
        class="space-y-4 border-t border-gray-100 pt-6"
      >
        <h3 class="text-sm font-bold text-gray-800 flex items-center gap-2">
          <i class="ph ph-shield-check text-blue-600"></i> Insurance Information
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >First Name</label
            >
            <input
              type="text"
              id="pay-insuranceFirstName"
              readonly
              class="input-field text-sm py-2 bg-gray-50 cursor-not-allowed"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Middle Name</label
            >
            <input
              type="text"
              id="pay-insuranceMiddleName"
              readonly
              class="input-field text-sm py-2 bg-gray-50 cursor-not-allowed"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Last Name</label
            >
            <input
              type="text"
              id="pay-insuranceLastName"
              readonly
              class="input-field text-sm py-2 bg-gray-50 cursor-not-allowed"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase">DOB</label>
            <input
              type="text"
              id="pay-insuranceDOB"
              readonly
              class="input-field text-sm py-2 bg-gray-50 cursor-not-allowed"
            />
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="md:col-span-2">
            <label class="block text-[10px] text-gray-400 uppercase"
              >Insurance Company</label
            >
            <input
              type="text"
              name="insuranceCompany"
              id="pay-insuranceCompany"
              class="input-field text-sm py-2"
            />
          </div>
          <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="md:col-span-3">
              <label class="block text-[10px] text-gray-400 uppercase"
                >Address</label
              >
              <input
                type="text"
                name="insuranceAddress"
                id="pay-insuranceAddress"
                class="input-field text-sm py-2"
              />
            </div>
            <div class="md:col-span-1">
              <label class="block text-[10px] text-gray-400 uppercase"
                >Apt</label
              >
              <input
                type="text"
                name="insuranceApt"
                id="pay-insuranceApt"
                class="input-field text-sm py-2"
              />
            </div>
          </div>
          <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label class="block text-[10px] text-gray-400 uppercase"
                >City</label
              >
              <input
                type="text"
                name="insuranceCity"
                id="pay-insuranceCity"
                class="input-field text-sm py-2"
              />
            </div>
            <div>
              <label class="block text-[10px] text-gray-400 uppercase"
                >State</label
              >
              <input
                type="text"
                name="insuranceState"
                id="pay-insuranceState"
                class="input-field text-sm py-2"
              />
            </div>
            <div>
              <label class="block text-[10px] text-gray-400 uppercase"
                >Zip</label
              >
              <input
                type="text"
                name="insuranceZip"
                id="pay-insuranceZip"
                maxlength="5"
                oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 5)"
                class="input-field text-sm py-2"
              />
            </div>
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Policy#</label
            >
            <input
              type="text"
              name="insurancePolicy"
              id="pay-insurancePolicy"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Member ID</label
            >
            <input
              type="text"
              name="insuranceMemberId"
              id="pay-insuranceMemberId"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Case#</label
            >
            <input
              type="text"
              name="insuranceCase"
              id="pay-insuranceCase"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Claim#</label
            >
            <input
              type="text"
              name="insuranceClaim"
              id="pay-insuranceClaim"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Contact Name</label
            >
            <input
              type="text"
              name="insuranceContactName"
              id="pay-insuranceContactName"
              class="input-field text-sm py-2"
            />
          </div>
          <div>
            <label class="block text-[10px] text-gray-400 uppercase"
              >Contact Phone</label
            >
            <input
              type="text"
              name="insuranceContactPhone"
              id="pay-insuranceContactPhone"
              oninput="formatPhone(this)"
              class="input-field text-sm py-2"
            />
          </div>
          <div class="md:col-span-2">
            <label class="block text-[10px] text-gray-400 uppercase"
              >Add Note</label
            >
            <input
              type="text"
              name="insuranceAddNote"
              id="pay-insuranceAddNote"
              class="input-field text-sm py-2"
            />
          </div>
        </div>
      </div>

      <!-- Check Details Section -->
      <div
        id="pay-checkDetails"
        class="hidden space-y-4 border-t border-gray-100 pt-6"
      >
        <h3 class="text-sm font-bold text-gray-800 flex items-center gap-2">
          <i class="ph ph-file-text text-blue-600"></i> Check Payment Info
        </h3>
        <div class="bg-blue-50 p-3 rounded-lg text-blue-800 text-[10px]">
          Please ensure all check payments are mailed to the official business
          address. Details for mailing will be sent separately.
        </div>
      </div>

      <div class="pt-4">
        <button
          type="submit"
          id="savePaymentBtn"
          class="w-full btn-primary py-3 flex items-center justify-center gap-2"
        >
          <i class="ph ph-floppy-disk"></i>
          Save Payment Details
        </button>
      </div>
    </div>
  </form>
</div>
