<div id="page-shift-add" class="page-section hidden">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">Schedule Shift</h1>

  <form id="shiftForm" onsubmit="submitShiftForm(event)" class="space-y-6 max-w-6xl mx-auto">
    
    <!-- 1. SELECTION & INFO -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      
      <!-- CLIENT SELECTOR -->
      <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
        <h2 class="sec-head"><i class="ph ph-user text-brand mr-2"></i> Select Client</h2>
        <div class="mb-4">
          <label class="lbl">All Client List</label>
          <select id="shiftClientSelect" class="inp" onchange="onShiftClientSelect()">
            <option value="">Select Client...</option>
          </select>
        </div>
        <div class="grid grid-cols-3 gap-2 bg-gray-50 p-3 rounded text-sm">
          <div><label class="text-xs text-gray-500 block">Code</label><input type="text" name="clientCode" id="dispClientCode" class="w-full bg-transparent border-none font-bold" readonly></div>
          <div><label class="text-xs text-gray-500 block">First Name</label><input type="text" id="dispClientFirst" class="w-full bg-transparent border-none" readonly></div>
          <div><label class="text-xs text-gray-500 block">Last Name</label><input type="text" id="dispClientLast" class="w-full bg-transparent border-none" readonly></div>
          <input type="hidden" name="clientName" id="hClientName">
        </div>
      </div>

      <!-- CAREGIVER SELECTOR -->
      <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
        <h2 class="sec-head"><i class="ph ph-briefcase text-brand mr-2"></i> Select Caregiver</h2>
        <div class="mb-4">
          <label class="lbl">All Caregiver List</label>
          <select id="shiftCgSelect" class="inp" onchange="onShiftCgSelect()">
            <option value="">Select Caregiver...</option>
          </select>
        </div>
        <div class="grid grid-cols-3 gap-2 bg-gray-50 p-3 rounded text-sm">
          <div><label class="text-xs text-gray-500 block">Code</label><input type="text" name="cgCode" id="dispCgCode" class="w-full bg-transparent border-none font-bold" readonly></div>
          <div><label class="text-xs text-gray-500 block">First Name</label><input type="text" id="dispCgFirst" class="w-full bg-transparent border-none" readonly></div>
          <div><label class="text-xs text-gray-500 block">Last Name</label><input type="text" id="dispCgLast" class="w-full bg-transparent border-none" readonly></div>
          <input type="hidden" name="cgName" id="hCgName">
        </div>
      </div>
    </div>

    <!-- 2. CARE MATCHING CHECK -->
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <h2 class="sec-head"><i class="ph ph-checks text-brand mr-2"></i> Care Matching Check</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left">
          <thead class="bg-gray-50 text-gray-600 uppercase text-xs">
            <tr>
              <th class="p-3">Care Match</th>
              <th class="p-3">Client (Needs)</th>
              <th class="p-3">Caregiver (Prefs)</th>
              <th class="p-3 text-center">Checking</th>
            </tr>
          </thead>
          <tbody class="divide-y">
            <!-- Pets -->
            <tr>
              <td class="p-3 font-bold">PETS</td>
              <td class="p-3" id="match-client-pets">-</td>
              <td class="p-3" id="match-cg-pets">-</td>
              <td class="p-3 text-center" id="res-pets"><span class="text-gray-300">--</span></td>
            </tr>
            <!-- Smoke -->
            <tr>
              <td class="p-3 font-bold">SMOKE</td>
              <td class="p-3" id="match-client-smoke">-</td>
              <td class="p-3" id="match-cg-smoke">-</td>
              <td class="p-3 text-center" id="res-smoke"><span class="text-gray-300">--</span></td>
            </tr>
            <!-- Drink -->
            <tr>
              <td class="p-3 font-bold">DRINK</td>
              <td class="p-3" id="match-client-drink">-</td>
              <td class="p-3" id="match-cg-drink">-</td>
              <td class="p-3 text-center" id="res-drink"><span class="text-gray-300">--</span></td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Matching Message -->
      <div id="match-message-box" class="mt-4 p-4 rounded text-center font-bold text-sm bg-gray-50 text-gray-500">
        Select both Client and Caregiver to check compatibility.
      </div>
      <input type="hidden" name="matchNotes" id="matchNotes">
    </div>

    <!-- 3. TIME & RATES -->
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
      <div class="flex justify-between items-center mb-4 border-b pb-2">
         <h2 class="sec-head mb-0 border-none"><i class="ph ph-clock text-brand mr-2"></i> Time & Financials</h2>
         <div class="text-right">
           <label class="text-xs text-gray-500 uppercase font-bold block">Invoice No</label>
           <input type="text" name="invoiceId" id="invoiceId" readonly class="text-right font-mono font-bold text-lg bg-transparent outline-none w-32" value="Loading...">
         </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
        <div><label class="lbl">Start Date</label><input type="date" name="startDate" class="inp"></div>
        <div><label class="lbl">End Date</label><input type="date" name="endDate" class="inp"></div>
        <div><label class="lbl">Clock In</label><input type="time" name="clockIn" id="clockIn" onchange="calcShiftHours()" class="inp"></div>
        <div><label class="lbl">Clock Out</label><input type="time" name="clockOut" id="clockOut" onchange="calcShiftHours()" class="inp"></div>
        <div><label class="lbl">Hours</label><input type="number" name="totalHours" id="totalHours" step="0.01" readonly class="inp bg-gray-50 font-bold"></div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <!-- Configuration -->
        <div class="bg-gray-50 p-4 rounded space-y-3">
           <label class="lbl">Rate Structure</label>
           <div class="flex items-center space-x-4">
             <label class="flex items-center cursor-pointer"><input type="radio" name="rateType" value="Hourly" checked onchange="calcFinancials()" class="mr-2 text-brand"> Hourly</label>
             <label class="flex items-center cursor-pointer"><input type="radio" name="rateType" value="Fixed" onchange="calcFinancials()" class="mr-2 text-brand"> Fixed</label>
           </div>
           
           <div class="grid grid-cols-2 gap-2 pt-2">
             <div><label class="lbl">Service</label><select name="serviceType" class="inp"><option>Weekdays</option><option>Weekend</option></select></div>
             <div><label class="lbl">Type</label><select name="shiftType" class="inp"><option>REG</option><option>HOL</option><option>OT</option></select></div>
           </div>
        </div>

        <!-- Inputs -->
        <div class="p-4 rounded border space-y-3">
           <div><label class="lbl">Client Rate ($)</label><input type="number" name="clientRate" id="clientRate" step="0.01" oninput="calcFinancials()" class="inp"></div>
           <div><label class="lbl">Caregiver Rate ($)</label><input type="number" name="cgRate" id="cgRate" step="0.01" oninput="calcFinancials()" class="inp"></div>
        </div>

        <!-- Results -->
        <div class="bg-green-50 p-4 rounded border border-green-100 space-y-3">
           <div class="flex justify-between"><span class="text-sm font-bold text-gray-600">Total Client:</span><input type="text" name="totalClientAmt" id="totalClientAmt" readonly class="w-24 text-right bg-transparent font-bold"></div>
           <div class="flex justify-between"><span class="text-sm font-bold text-gray-600">Total Caregiver:</span><input type="text" name="totalCgAmt" id="totalCgAmt" readonly class="w-24 text-right bg-transparent font-bold"></div>
           <div class="border-t border-green-200 my-2"></div>
           <div class="flex justify-between items-center"><span class="text-sm font-bold text-brand uppercase">Profit</span><input type="text" name="profit" id="profit" readonly class="w-24 text-right bg-transparent font-bold text-lg text-brand"></div>
        </div>
      </div>
    </div>

    <!-- SUBMIT -->
    <div class="flex justify-end pt-4 pb-8">
      <button type="submit" class="bg-brand hover-bg-brand text-white font-bold py-3 px-10 rounded-lg shadow-lg transform active:scale-95 transition flex items-center">
        <i class="ph ph-calendar-plus text-xl mr-2"></i> Schedule Shift
      </button>
    </div>

  </form>
</div>